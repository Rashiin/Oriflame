(()=>{var e={884:(e,t,n)=>{var r="[object Symbol]",a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i="\\u0300-\\u036f\\ufe20-\\ufe23",c="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",p="[\\ud800-\\udfff]",l="["+d+"]",v="["+i+"\\u20d0-\\u20f0]",m="\\d+",y="[\\u2700-\\u27bf]",h="["+s+"]",g="[^\\ud800-\\udfff"+d+m+c+s+u+"]",w="\\ud83c[\\udffb-\\udfff]",O="[^\\ud800-\\udfff]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",j="["+u+"]",C="(?:"+h+"|"+g+")",E="(?:"+j+"|"+g+")",I="(?:['’](?:d|ll|m|re|s|t|ve))?",x="(?:['’](?:D|LL|M|RE|S|T|VE))?",B="(?:"+v+"|"+w+")"+"?",P="[\\ufe0e\\ufe0f]?",k=P+B+("(?:\\u200d(?:"+[O,b,S].join("|")+")"+P+B+")*"),U="(?:"+[y,b,S].join("|")+")"+k,A="(?:"+[O+v+"?",v,b,S,p].join("|")+")",T=RegExp(f,"g"),D=RegExp(v,"g"),_=RegExp(w+"(?="+w+")|"+A+k,"g"),N=RegExp([j+"?"+h+"+"+I+"(?="+[l,j,"$"].join("|")+")",E+"+"+x+"(?="+[l,j+C,"$"].join("|")+")",j+"?"+C+"+"+I,j+"+"+x,m,U].join("|"),"g"),R=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),L=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,F="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,Y="object"==typeof self&&self&&self.Object===Object&&self,q=F||Y||Function("return this")();var M,z=(M={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==M?void 0:M[e]});function G(e){return R.test(e)}function H(e){return G(e)?function(e){return e.match(_)||[]}(e):function(e){return e.split("")}(e)}var J=Object.prototype.toString,V=q.Symbol,Z=V?V.prototype:void 0,W=Z?Z.toString:void 0;function $(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&J.call(e)==r}(e))return W?W.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function K(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}(e,t,n)}function Q(e){return null==e?"":$(e)}var X,ee=(X=function(e,t,n){return t=t.toLowerCase(),e+(n?ne(Q(t).toLowerCase()):t)},function(e){return function(e,t,n,r){var a=-1,o=e?e.length:0;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}(function(e,t,n){return e=Q(e),void 0===(t=n?void 0:t)?function(e){return L.test(e)}(e)?function(e){return e.match(N)||[]}(e):function(e){return e.match(a)||[]}(e):e.match(t)||[]}(function(e){return(e=Q(e))&&e.replace(o,z).replace(D,"")}(e).replace(T,"")),X,"")});var te,ne=(te="toUpperCase",function(e){var t=G(e=Q(e))?H(e):void 0,n=t?t[0]:e.charAt(0),r=t?K(t,1).join(""):e.slice(1);return n[te]()+r});e.exports=ee}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i="accept-notification",c="add-backorder-demand",s="add-basket-offer",u="add-catalogue-offer",d="add-customer-order",f="add-free-shipping-offer",p="add-to-basket";!function(e){e.BUY_FOR_MONEY="BUY_FOR_MONEY",e.BUY_FOR_POINTS="BUY_FOR_POINTS"}(o||(o={}));var l,v,m="add-voucher",y="loyalty-dialog-result";!function(e){e.CLOSE="CLOSE"}(l||(l={})),function(e){e[e.CLOSE=l.CLOSE]="CLOSE",e[e.BUY_FOR_MONEY=o.BUY_FOR_MONEY]="BUY_FOR_MONEY",e[e.BUY_FOR_POINTS=o.BUY_FOR_POINTS]="BUY_FOR_POINTS"}(v||(v={}));var h,g;!function(e){e[e.BUY_WITH_DISCOUNT=1]="BUY_WITH_DISCOUNT",e[e.GET_BENEFIT=2]="GET_BENEFIT",e[e.CHOOSE_WITH_DISCOUNT=3]="CHOOSE_WITH_DISCOUNT",e[e.CHOOSE_AND_GET=4]="CHOOSE_AND_GET",e[e.CHOOSE_AND_CHOOSE=5]="CHOOSE_AND_CHOOSE"}(h||(h={})),function(e){e.Error="Error",e.Info="Info",e.Reminding="Reminding",e.Success="Success",e.Warning="Warning"}(g||(g={}));var w,O,b,S,j="basket-updated",C="cancel-backorder-demand",E="cancel-subscription",I="clear-basket",x="delay-subscription",B="place-order-requested",P="remove-basket-item",k="remove-customer-order",U="remove-voucher",A="replace-shopping-bag-item",T="request-clear-shopping-cache",D="request-shopping-context",_="reset-shipping-selection",N="shopping-context-loaded",R=N,L="update-basket-item",F="update-customer-order-item",Y="update-delivery",q="update-delivery-channel",M="update-donation",z="update-offer-item",G="update-offer-items",H="update-payment-provider",J=function(e){return"object"==typeof e&&!1===e.isSuccess},V="accept-notification-failed",Z="add-basket-offer-failed";function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}!function(e){e.Json="application/json"}(w||(w={})),function(e){e.ContentType="Content-Type",e.Placement="x-placement"}(O||(O={})),function(e){e.Get="GET",e.Post="POST"}(b||(b={})),function(e){e.AcceptNotification="/system/ajax/Message/AcceptFailMessage",e.AddBackorderDemand="/system/ajax/ShoppingBag/AddBackorderDemand",e.AddBasketOffer="/system/ajax/Offer/ApplyBasketOffer",e.AddCatalogueOffer="/system/ajax/Offer/ApplyCatalogueOffer",e.AddCustomerOrder="/system/ajax/EndConsumerOrder/ApproveOrders",e.AddFreeShippingOffer="/system/ajax/Delivery/AddFreeShippingItem",e.AddToBasketCheckLoyalty="/system/ajax/ShoppingBag/AddToShoppingBagItemAndCheckLoyalty",e.AddToBasketForMoney="/system/ajax/ShoppingBag/AddOrUpdateShoppingBagItem",e.AddToBasketForPoints="/system/ajax/Offer/AddOfferItem",e.AddToBasketForPointsRewardShop="/system/ajax/Offer/RedeemLoyaltyPoints",e.AddVoucher="/system/ajax/ShoppingBag/AddVoucher",e.CancelBackorderDemand="/system/ajax/ShoppingBag/CancelBackorderDemand",e.CancelSubscription="/system/ajax/ShoppingBag/CancelSubscription",e.ClearBasket="/system/ajax/ShoppingBag/RemoveAllShoppingBagItems",e.DelaySubscription="/system/ajax/ShoppingBag/DelaySubscription",e.GetShoppingContext="/system/ajax/ShoppingBag/GetShoppingContext",e.PurchaseBasketOffer="/system/ajax/Offer/PurchaseBasketOffer",e.RemoveBasketItem="/system/ajax/ShoppingBag/RemoveShoppingBagItem",e.RemoveCustomerOrder="/system/ajax/EndConsumerOrder/UnapproveOrder",e.RemoveVoucher="/system/ajax/ShoppingBag/RemoveVoucher",e.ReplaceShoppingBagItem="/system/ajax/ShoppingBag/ReplaceShoppingBagItem",e.ResetFreeShippingSelection="/system/ajax/Delivery/ResetFreeShippingSelection",e.UpdateBasketItem="/system/ajax/ShoppingBag/UpdateShoppingBagItem",e.UpdateCustomerOrderItem="/system/ajax/EndConsumerOrder/UpdateEndConsumerOrderItem",e.UpdateDeliveryAddress="/system/ajax/DeliverySelection/UpdateDeliveryAddress",e.UpdateDeliveryChannel="/system/ajax/DeliverySelection/UpdateDeliveryChannel",e.UpdateDonation="/system/ajax/Donation/UpdateDonation",e.UpdateOfferItem="/system/ajax/Offer/UpdateOfferItem",e.UpdateOfferItems="/system/ajax/Offer/UpdateOfferItems",e.UpdatePaymentProvider="/system/ajax/Payment/UpdatePaymentProvider"}(S||(S={}));var $=n(884),K=n.n($),Q=function e(n){return Array.isArray(n)?n.map(e):"object"===W(n)&&null!==n&&n.constructor===Object?Object.fromEntries(Object.entries(n).map((function(n){var r=t(n,2),a=r[0],o=r[1];return[K()(a),e(o)]}))):n};function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee=["placement"];function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Get,r=a({},O.ContentType,w.Json);if(e){var o=e.placement,i=X(e,ee);o&&(r[O.Placement]=o);var c=JSON.stringify(i);t="{}"===c?void 0:c}return ne({credentials:"same-origin",headers:r,method:n},n===b.Post&&Boolean(t)&&{body:t})},ae=async function(e,t){var n=await fetch(e,re(t,b.Post)),r=Q(await n.json());if(function(e){return"isSuccess"in e&&!e.isSuccess}(r)){var a=new CustomEvent(Z,{detail:r});return window.dispatchEvent(a),!1}return r},oe="shopping-bag-provider",ie=function(){var e=new Date;return"".concat(e.getHours(),":").concat("0".concat(e.getMinutes()).slice(-2),":").concat("0".concat(e.getSeconds()).slice(-2),".").concat("00".concat(e.getMilliseconds()).slice(-3))},ce=function(){var e;return Boolean(window.localStorage)&&Boolean(JSON.parse(null!==(e=localStorage.getItem("".concat(oe," debug")))&&void 0!==e?e:"0"))},se=function(){var e;if(ce()){for(var t=ie(),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=console).log.apply(e,["%c".concat(t," %c").concat(oe,":"),"color: #09c","color: #c90;"].concat(r))}},ue=function(e){return se("Received ".concat(e.type," event:\n\t"),e)},de=["/shopping/basket"],fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)};var pe="shoppingContext",le="shopping-bag-provider cache cleanup",ve=window.localStorage,me=Boolean(ve);me||se("Storage is not available.");var ye=function(){var e,t,n;return function(e){for(var t=e.length,n=1,r=0,a=0;a<t;a++)r+=n+=e.charCodeAt(a);return(r%=65521)<<16|n%65521}((null!==(t="ShoppingKey",n=document.cookie.match(new RegExp("".concat(t,"=([^;]+)"))),e=n?n[1]:void 0)&&void 0!==e?e:"").trim()||"unknown")},he=function(e){var t;try{t=JSON.parse(e)}catch(e){se("Error parsing serialized data:",e)}return t},ge=function(e){if(me){var t=ve.getItem(e);if(t){var n=he(t);if(n){var r,a=n.savedTimestamp,o=n.value,i=n.userCheck;return r=a,Date.now()-r<=3e5?i!==ye()?(ve.removeItem(e),void se("Item with key '".concat(e,"' was stored for different user and was deleted."))):(se("Item with key ".concat(e," was found in storage.\n\t"),n),o):(ve.removeItem(e),void se("Stored item with key '".concat(e,"' has expired and was deleted.")))}se("Error getting stored item with key '".concat(e,"'."))}else se("Item with key '".concat(e,"' wasn't found in storage."))}},we=function(e){try{ve.removeItem(e),se("Stored item with key '".concat(e,"' was removed."))}catch(t){return se("Error removing item with key '".concat(e,"':"),t),!1}return!0};var Oe="update-basket-item-failed",be=function(e){return J(e)};var Se="add-catalogue-offer-failed";var je="add-customer-order-failed";function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie="add-free-shipping-offer-failed";var xe="add-to-basket-failed",Be="show-loyalty-dialog";function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ue=async function(e,t,n){var r=t.itemCode,a=t.placement,o=t.quantity,i=await fetch(e,re(t,b.Post)),c=Q(await i.json());if(function(e){return Boolean(e.loyaltyPoints)}(c)){var s=new CustomEvent(Be,{detail:ke(ke({},c),{},{itemCode:r,placement:a,quantity:o})});return window.dispatchEvent(s),!1}if(function(e){return Boolean(e.shoppingBag)}(c))return ke(ke({},c),{},{lastAddedItem:{itemCode:r,method:n,quantity:o}});if(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(c)){var u=new CustomEvent(xe,{detail:c});return window.dispatchEvent(u),!1}return!1};var Ae="add-voucher-failed";var Te="cancel-subscription-failed";var De="delay-subscription-failed";var _e="remove-customer-order-failed";var Ne="remove-voucher-failed";var Re="replace-shopping-bag-item-failed";var Le="update-customer-order-item-failed";var Fe="update-delivery-channel-failed",Ye={method:"PUT",headers:{"Content-Type":"application/json"}};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze="update-delivery-failed",Ge=function(e){return J(e)};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve="update-donation-failed";var Ze="update-payment-provider-failed";function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $e=function(e){return function(e,t){if(!me)return!1;var n={savedTimestamp:Date.now(),value:t,userCheck:ye()};try{ve.setItem(e,JSON.stringify(n)),se("Stored item with key '".concat(e,"', value:\n\t"),n)}catch(t){return se("Error storing item with ".concat(e,":"),t),!1}return!0}(pe,e)},Ke=[[i,async function(e){var t=e.detail.reasonId,n=await fetch("".concat(S.AcceptNotification,"?reasonId=").concat(t)),r=Q(await n.json());if(function(e){return J(e)}(r)){var a=new CustomEvent(V,{detail:r});return window.dispatchEvent(a),!1}return r}],[c,async function(e){var t=e.detail,n=t.lineNumber,r=t.placement,a=t.quantity;if("number"==typeof a&&a>0){var o=await fetch("".concat(S.UpdateBasketItem,"?lineNumber=").concat(n,"&quantity=").concat(a),re({placement:r})),i=Q(await o.json());if(be(i)){var c=new CustomEvent(Oe,{detail:i});return window.dispatchEvent(c),!1}}var s=await fetch("".concat(S.AddBackorderDemand,"?lineNumber=").concat(n),re());return Q(await s.json())}],[s,async function(e){if(function(e){return Boolean(e.detail.items)}(e)){var t=e.detail,n=t.items,r=t.offerId,a=t.placement;return ae(S.PurchaseBasketOffer,{choiceId:r,items:n,placement:a})}var o=e.detail,i=o.offerId,c=o.placement;return ae(S.AddBasketOffer,{offerId:i,placement:c})}],[u,async function(e){var t,n=e.detail,r=n.offerId,a=n.placement,o=await fetch(S.AddCatalogueOffer,re({offerId:r,placement:a},b.Post)),i=Q(await o.json());return function(e){return J(e)}(i)?(t=new CustomEvent(Se,{detail:i}),window.dispatchEvent(t),!1):i}],[d,async function(e){var t=e.detail,n=t.orderIds,r=t.placement,a=new URL(S.AddCustomerOrder,window.location.href);n.forEach((function(e){return a.searchParams.append("orderIds",String(e))}));var o=await fetch(a.toString(),re({placement:r})),i=Q(await o.json());if(function(e){return Boolean(e.shoppingBag)}(i))return Ee(Ee({},i),{},{lastAddedCustomerOrderIds:n});if(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(i)){var c=new CustomEvent(je,{detail:i});return window.dispatchEvent(c),!1}return!1}],[f,async function(e){var t,n=e.detail,r=n.itemCode,a=n.placement,o=await fetch(S.AddFreeShippingOffer,re({itemCode:r,placement:a},b.Post)),i=Q(await o.json());return function(e){return J(e)}(i)?(t=new CustomEvent(Ie,{detail:i}),window.dispatchEvent(t),!1):i}],[p,async function(e){var t=e.detail,n=t.itemCode,r=t.quantity,a=t.originalItemCode,i=t.replacementType,c=t.method,s=t.placement,u=function(e){switch(e){case o.BUY_FOR_MONEY:return{url:S.AddToBasketForMoney,method:o.BUY_FOR_MONEY};case o.BUY_FOR_POINTS:return{url:S.AddToBasketForPointsRewardShop,method:o.BUY_FOR_POINTS};default:return{url:S.AddToBasketCheckLoyalty,method:o.BUY_FOR_MONEY}}}(c),d=u.url,f=u.method;return Ue(d,{itemCode:n,quantity:r,originalItemCode:a,replacementType:i,placement:s},f)}],[m,async function(e){var t,n=e.detail,r=n.placement,a=n.voucherCode,o="".concat(S.AddVoucher,"?voucherCode=").concat(a),i=await fetch(o,re({placement:r})),c=Q(await i.json());return function(e){return Boolean(e.shoppingBag)}(c)?c:(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(c)&&(t=new CustomEvent(Ae,{detail:c}),window.dispatchEvent(t)),!1)}],[C,async function(e){var t=e.detail,n=t.lineNumber,r=t.placement,a=await fetch("".concat(S.CancelBackorderDemand,"?lineNumber=").concat(n),re({placement:r}));return Q(await a.json())}],[E,async function(e){var t,n=e.detail,r=n.consumerId,a=n.packageId,o=n.placement,i=n.subscriptionId,c=await fetch("".concat(S.CancelSubscription,"?consumerId=").concat(r,"&subscriptionId=").concat(i,"&packageId=").concat(a),re({placement:o})),s=Q(await c.json());return function(e){return J(e)}(s)?(t=new CustomEvent(Te,{detail:s}),window.dispatchEvent(t),!1):s}],[I,async function(){var e=await fetch(S.ClearBasket,re());return Q(await e.json())}],[x,async function(e){var t,n=e.detail,r=n.cycle,a=n.placement,o=n.step,i=n.subscriptionId,c=await fetch(S.DelaySubscription,re({cycle:r,placement:a,step:o,subscriptionId:i},b.Post)),s=Q(await c.json());return function(e){return Boolean(e.shoppingBag)}(s)?s:(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(s)&&(t=new CustomEvent(De,{detail:s}),window.dispatchEvent(t)),!1)}],[y,function(e){var t=e.detail,n=t.result;if(function(e){return e===l.CLOSE}(n))return!1;if(function(e){return e===o.BUY_FOR_POINTS}(n)){var r=t.catalogueItemId,a=t.choiceId,i=t.itemCode,c=t.quantity,s=t.placement;return Ue(S.AddToBasketForPoints,{itemCode:i,quantity:c,choiceId:a,catalogueItemId:r,placement:s},o.BUY_FOR_POINTS)}if(function(e){return e===o.BUY_FOR_MONEY}(n)){var u=t.itemCode,d=t.quantity,f=t.originalItemCode,p=t.replacementType,v=t.placement;return Ue(S.AddToBasketForMoney,{itemCode:u,quantity:d,originalItemCode:f,replacementType:p,placement:v},o.BUY_FOR_MONEY)}return!1}],[P,async function(e){var t=e.detail,n=t.lineNumber,r=t.placement,a=await fetch(S.RemoveBasketItem,re({lineNumber:n,placement:r},b.Post));return Q(await a.json())}],[k,async function(e){var t=e.detail,n=t.endConsumerOrderId,r=t.placement,a="".concat(S.RemoveCustomerOrder,"?endConsumerOrderId=").concat(n),o=await fetch(a,re({placement:r})),i=Q(await o.json());if(function(e){return Boolean(e.shoppingBag)}(i))return i;if(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(i)){var c=new CustomEvent(_e,{detail:i});window.dispatchEvent(c)}return!1}],[U,async function(e){var t,n=e.detail,r=n.placement,a=n.voucherCode,o="".concat(S.RemoveVoucher,"?voucherCode=").concat(a),i=await fetch(o,re({placement:r})),c=Q(await i.json());return function(e){return Boolean(e.shoppingBag)}(c)?c:(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(c)&&(t=new CustomEvent(Ne,{detail:c}),window.dispatchEvent(t)),!1)}],[A,async function(e){var t=e.detail,n=t.itemCode,r=t.lineNumber,a=t.placement,o=await fetch("".concat(S.ReplaceShoppingBagItem,"?lineNumber=").concat(r,"&itemCode=").concat(n),re({placement:a})),i=Q(await o.json());if(function(e){return"isSuccess"in e&&!e.isSuccess}(i)){var c=new CustomEvent(Re,{detail:i});return window.dispatchEvent(c),!1}return i}],[_,async function(){var e=await fetch(S.ResetFreeShippingSelection,re());return Q(await e.json())}],[L,async function(e){var t=e.detail,n=t.lineNumber,r=t.placement,a=t.quantity,o=await fetch("".concat(S.UpdateBasketItem,"?lineNumber=").concat(n,"&quantity=").concat(a),re({placement:r})),i=Q(await o.json());if(be(i)){var c=new CustomEvent(Oe,{detail:i});return window.dispatchEvent(c),!1}return i}],[F,async function(e){var t=e.detail,n=t.endConsumerOrderId,r=t.itemCode,a=t.placement,o=t.requestedQuantity,i="".concat(S.UpdateCustomerOrderItem)+"?endConsumerOrderId=".concat(n)+"&itemCode=".concat(r)+"&requestedQuantity=".concat(o),c=await fetch(i,re({placement:a})),s=Q(await c.json());if(function(e){return Boolean(e.shoppingBag)}(s))return s;if(function(e){return"boolean"==typeof e.isSuccess&&!e.isSuccess}(s)){var u=new CustomEvent(Le,{detail:s});window.dispatchEvent(u)}return!1}],[Y,async function(e){var t=e.detail,n=t.deliveryAddressId,r=t.deliveryChannelId,a=t.registrationId;if(void 0!==r){var o=Je(Je({},Ye),{},{body:JSON.stringify({deliveryChannelId:r})}),i=await fetch(S.UpdateDeliveryChannel,o),c=Q(await i.json());if(Ge(c)){var s=new CustomEvent(ze,{detail:c});return window.dispatchEvent(s),!1}}var u={addressId:n};a&&(u.registrationId=a);var d=Je(Je({},Ye),{},{body:JSON.stringify(u)}),f=await fetch(S.UpdateDeliveryAddress,d),p=Q(await f.json());if(Ge(p)){var l=new CustomEvent(ze,{detail:p});return window.dispatchEvent(l),!1}return p}],[q,async function(e){var t=e.detail.deliveryChannelId,n=Me(Me({},Ye),{},{body:JSON.stringify({deliveryChannelId:t})}),r=await fetch(S.UpdateDeliveryChannel,n),a=Q(await r.json());if(function(e){return J(e)}(a)){var o=new CustomEvent(Fe,{detail:a});return window.dispatchEvent(o),!1}return a}],[M,async function(e){var t=e.detail,n=t.choiceId,r=t.checked,a=await fetch(S.UpdateDonation,re({choiceId:n,checked:r},b.Post)),o=Q(await a.json());if(function(e){return J(e)}(o)){var i=new CustomEvent(Ve,{detail:o});window.dispatchEvent(i)}return o}],[G,async function(e){var t=e.detail,n=t.choiceId,r=t.items,a=t.placement,o=await fetch(S.UpdateOfferItems,re({choiceId:n,items:r,placement:a},b.Post));return Q(await o.json())}],[z,async function(e){var t=e.detail,n=t.choiceId,r=t.itemCode,a=t.placement,o=t.quantity,i=await fetch(S.UpdateOfferItem,re({choiceId:n,itemCode:r,placement:a,quantity:o},b.Post));return Q(await i.json())}],[H,async function(e){var t=e.detail,n=t.paymentProviderId,r=t.placement,a=await fetch("".concat(S.UpdatePaymentProvider,"?paymentProviderId=").concat(n),re({placement:r})),o=Q(await a.json());if(function(e){return J(e)}(o)){var i=new CustomEvent(Ze,{detail:o});return window.dispatchEvent(i),!1}return o}]],Qe=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"eventListeners",[]),a(this,"isBrowserStorageUsed",!1),a(this,"isBrowserTabsSynchronizationUsed",!1),a(this,"isRequestingShoppingContext",!1),a(this,"shoppingContext",void 0),this.parseConfiguration(),this.isBrowserStorageUsed&&((t=de.some((function(e){return window.location.pathname.includes(e)})))&&se("Cache cleanup is always requested for current page."),t||function(){if(!me)return!1;var e=Boolean(ve.getItem(le));return e&&se("Cache cleanup was scheduled with last page reload."),e}()?(this.clearContext(),ve.removeItem(le)):this.getStoredContext()),this.initEventListeners()}var n,o,i;return n=e,o=[{key:"getConfiguration",value:function(){return{isBrowserStorageUsed:this.isBrowserStorageUsed,isBrowserTabsSynchronizationUsed:this.isBrowserTabsSynchronizationUsed}}},{key:"getContext",value:function(){return this.shoppingContext?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.shoppingContext):void 0}},{key:"initEventListeners",value:function(){var e,n,r=this;if(this.eventListeners.length&&this.removeEventListeners(),this.eventListeners=Ke.map((function(e){var n=t(e,2),a=n[0],o=n[1];return[a,async function(e){ue(e);var t=await o(e);!1===t?se("Shopping context update failed."):r.updateContext(t,j)}]})),this.eventListeners.push([D,async function(e){if(ue(e),r.shoppingContext)return se("Context data was loaded before. Triggering ".concat(R," event ...")),void fe(r.shoppingContext,R);if(r.isRequestingShoppingContext)se("Shopping context was already requested. Waiting for response ...");else{se("Loading shopping context ..."),r.isRequestingShoppingContext=!0;var t=await async function(){var e=await fetch(S.GetShoppingContext,re(void 0,b.Post)),t=Q(await e.json()),n=new CustomEvent(N,{detail:t});return window.dispatchEvent(n),t}();r.isRequestingShoppingContext=!1,se("Shopping context was loaded."),r.updateContext(t,R)}}],[B,function(e){return r.clearContextOnEvent(e)}],[T,function(e){return r.clearContextOnEvent(e)}]),this.isBrowserTabsSynchronizationUsed){var a=(e=pe,n=function(e){e&&r.updateContext(e,j,!1)},{eventName:"storage",eventListener:function(t){if(t.storageArea===ve&&t.key===e){if(se("Storage change event from another browser tab was received for item with key '".concat(e,"'.")),null===t.newValue)return se("Stored item with '".concat(e,"' was removed in another browser window.")),we(e),null==n?void 0:n(void 0);var r=he(t.newValue);if(r){try{ve.setItem(e,t.newValue),se("Stored item with key '".concat(e,"', value:\n\t"),r)}catch(t){se("Error storing item with key '".concat(e,"':"),t)}return null==n?void 0:n(r.value)}}}}),o=a.eventName,i=a.eventListener;this.eventListeners.push([o,i])}this.eventListeners.forEach((function(e){var n=t(e,2),r=n[0],a=n[1];return window.addEventListener(r,a)})),se("Event listeners are connected.")}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach((function(e){var n=t(e,2),r=n[0],a=n[1];return window.removeEventListener(r,a)})),this.eventListeners=[],se("Old event listeners were disconnected.")}},{key:"parseConfiguration",value:function(){var t,n=document.getElementById(e.CONFIG_ELEMENT_ID),r=null!==(t=null==n?void 0:n.innerHTML)&&void 0!==t?t:"{}";se("Raw configuration data:\n\t",r);var a=JSON.parse(r),o=a.useBrowserTabsSynchronization,i=void 0===o||o,c=a.useLocalStorage,s=void 0!==c&&c;this.isBrowserStorageUsed=me&&s,this.isBrowserTabsSynchronizationUsed=this.isBrowserStorageUsed&&i,n&&se("Configuration was parsed from element #".concat(e.CONFIG_ELEMENT_ID,".")),se("Current configuration:","\n\tisBrowserStorageUsed:",this.isBrowserStorageUsed,"\n\tisBrowserTabsSynchronizationUsed:",this.isBrowserTabsSynchronizationUsed)}},{key:"getStoredContext",value:function(){var e=ge(pe);e&&(this.updateContext(e,void 0,!1),se("Restored context data from storage."))}},{key:"updateContext",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.shoppingContext=e,n&&this.isBrowserStorageUsed?($e(e),se("Stored context was updated with new data:\n\t",e)):se("Context was updated with new data:\n\t",e),t&&(se("Triggering ".concat(t," event ...")),fe(e,t))}},{key:"clearContext",value:function(){se("Clearing stored shopping context data ..."),this.shoppingContext=void 0,we(pe)}},{key:"clearContextOnEvent",value:function(e){ue(e),this.clearContext()}}],o&&r(n.prototype,o),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();a(Qe,"CONFIG_ELEMENT_ID","basket-provider-data");new Qe})()})();
//# sourceMappingURL=index.js.map